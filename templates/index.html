<!DOCTYPE html>
<html lang="en-us">
    <!--
    (c) 2021 Seth Peace
    All Rights Reserved

    Licensed to Classical Academy Middle School
    Please No Unauthorized Use ~ Forking is OK
    Thank You,
    𝓢𝓮𝓽𝓱 𝓟𝓮𝓪𝓬𝓮
    -->

    <head>
        <title>QR Code Scan Test</title>

        <!-- Imports -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"
                integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg=="
                crossorigin="anonymous"></script> <!-- This does something -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/instascan/1.0.0/index.min.js"
                integrity="sha512-ve8zzIbgiFFiUFW32RRJD+NBFRoVrGlhYfRLcTbQrqcFeazoPxhV03wWlyvDQE+/8GgZSMp+HqJlVBloc9D2vA=="
                crossorigin="anonymous"></script> <!-- Instascan powers QR Code Scanning -->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"
                integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
                crossorigin="anonymous"></script> <!-- JQuery powers the website basics -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/brython/3.9.1/brython.min.js"
                integrity="sha512-QqJtZYGp0eHzvOxKw2RUODSL2iVW/2FH5NAaEobhgiVD0rUTJMVo4oLYd9QyEYwit0en+CGeft8eV/zEFeNPxA=="
                crossorigin="anonymous"></script> <!-- Brython lets me use python instead of js cuz js is bad -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/brython/3.9.1/brython_stdlib.min.js"
                integrity="sha512-+w8uBdt0FTsenu79jeXSP+l6WKTPhQwTtqnJMiyYCvb1IvbhGSwf7O+qZmcaX3dsOB2J3AOWGR/DKQMevte9hQ=="
                crossorigin="anonymous"></script> <!-- The other part of Brython -->
    </head>
    <body onload="brython()">
        <video id="preview"></video> <!-- Instascan puts the Camera Preview in here TODO: Make it look better -->
        <div id="content-goes-here">Scan A QR Code!</div> <!-- Instascan puts the content of the QR Code in here TODO: Make it look better -->

        <script type="text/javascript"> // TODO: Rewrite in Brython
            let scanner = new Instascan.Scanner({          // Create a QR Code Scanner
                video: document.getElementById('preview'), // and put it in the video element above,
                mirror: false                              // but don't mirror the video feed. TODO: Add Mirror Option?
            });

            scanner.addEventListener('scan', function (content) { // If a QR Code is scanned,
                $("#content-goes-here").html(content)        // put it's content in the div above.
            });

            Instascan.Camera.getCameras().then(function (cameras) {    // Once cameras are loaded,
                if (cameras.length > 0) {                              // (if there are any)
                    scanner.start(cameras[0]);                         // start camera #1 (index 0). TODO: Let User Pick Which Camera
                } else {                                               // If there aren't any cameras,
                    $("#content-goes-here").html('No cameras found.'); // tell the user.
                }
            }).catch(function (e) {              // If there's a problem,
                $("#content-goes-here").html(e); // tell the user. TODO: Eliminate Any Problems!
            });
        </script>
    </body>
</html>
